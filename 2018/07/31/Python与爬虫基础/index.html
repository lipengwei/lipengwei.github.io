<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.3.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="python基础 1.Python有6种标准数据类型   数字 布尔（Boolean） 字符串（string） 列表（List） 元组（tuple） 字典（dict）   2.Python支持4种数字类型   int（整形） long（长整型，python3取消，变为int） float（浮点型） complex（复数）   3.输入与输出   print不换行: print(x, end=&amp;qu">
<meta name="keywords" content="python, 爬虫">
<meta property="og:type" content="article">
<meta property="og:title" content="Python与爬虫基础">
<meta property="og:url" content="http://yoursite.com/2018/07/31/Python与爬虫基础/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="python基础 1.Python有6种标准数据类型   数字 布尔（Boolean） 字符串（string） 列表（List） 元组（tuple） 字典（dict）   2.Python支持4种数字类型   int（整形） long（长整型，python3取消，变为int） float（浮点型） complex（复数）   3.输入与输出   print不换行: print(x, end=&amp;qu">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-07-31T08:58:59.899Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Python与爬虫基础">
<meta name="twitter:description" content="python基础 1.Python有6种标准数据类型   数字 布尔（Boolean） 字符串（string） 列表（List） 元组（tuple） 字典（dict）   2.Python支持4种数字类型   int（整形） long（长整型，python3取消，变为int） float（浮点型） complex（复数）   3.输入与输出   print不换行: print(x, end=&amp;qu">






  <link rel="canonical" href="http://yoursite.com/2018/07/31/Python与爬虫基础/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Python与爬虫基础 | Hexo</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Startseite</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archiv</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/31/Python与爬虫基础/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Python与爬虫基础
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Post created: 2018-07-31 16:57:53 / Updated at: 16:58:59" itemprop="dateCreated datePublished" datetime="2018-07-31T16:57:53+08:00">2018-07-31</time>
            

            
              

              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2>python基础</h2>
<h3>1.Python有6种标准数据类型</h3>
<blockquote>
<ul>
<li>数字</li>
<li>布尔（Boolean）</li>
<li>字符串（string）</li>
<li>列表（List）</li>
<li>元组（tuple）</li>
<li>字典（dict）</li>
</ul>
</blockquote>
<h3>2.Python支持4种数字类型</h3>
<blockquote>
<ul>
<li>int（整形）</li>
<li>long（长整型，python3取消，变为int）</li>
<li>float（浮点型）</li>
<li>complex（复数）</li>
</ul>
</blockquote>
<h3>3.输入与输出</h3>
<blockquote>
<ul>
<li>print不换行: print(x, end=&quot; &quot;)</li>
<li>input(&quot;请输入x值：&quot;)</li>
<li>python保留字</li>
</ul>
</blockquote>
<h3>4.数据结构 List</h3>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">lst = [ <span class="string">'abcd'</span>, <span class="number">786</span> , <span class="number">2.23</span>, <span class="string">'john'</span>, <span class="number">70.2</span> ]</span><br><span class="line">print(lst)</span><br><span class="line">print(lst[<span class="number">2</span>])</span><br><span class="line"><span class="comment"># 向后添加元素</span></span><br><span class="line">lst.append(<span class="string">'hello'</span>)</span><br><span class="line">print(lst)</span><br><span class="line"><span class="comment"># 删除最后一个元素</span></span><br><span class="line">lst.pop()</span><br><span class="line">print(lst)</span><br><span class="line"><span class="comment"># 删除内容为'abcd'的元素</span></span><br><span class="line">lst.remove(<span class="string">'abcd'</span>)</span><br><span class="line">print(lst)</span><br><span class="line">list_ = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">6</span>]</span><br><span class="line"><span class="comment"># 按数字大小进行排序</span></span><br><span class="line">list_.sort()</span><br><span class="line">print(list_)</span><br><span class="line"></span><br><span class="line"><span class="comment">#列表的便利</span></span><br><span class="line">list_ = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> list_:</span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> i &lt; len(list_):</span><br><span class="line">    print(list_[i])</span><br><span class="line">    i+=<span class="number">1</span></span><br></pre></td></tr></table></figure></p>
<p>元组 tuple，与列表基本相同，区别是使用()而不是[],而且元组是只读的
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tp = ( <span class="string">'abcd'</span>, <span class="number">786</span> , <span class="number">2.23</span>, <span class="string">'john'</span>, <span class="number">70.2</span>  )</span><br><span class="line">print(tp)</span><br><span class="line">print(tp[<span class="number">2</span>])</span><br></pre></td></tr></table></figure></p>
<p>切片 字符串和列表都存在切片操作
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">"abcdef"</span></span><br><span class="line">b = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'e'</span>,<span class="string">'f'</span>]</span><br><span class="line"><span class="comment">#len方法可以计算字符串、列表的长度</span></span><br><span class="line">len_ = len(a)</span><br><span class="line">print(len_)</span><br><span class="line"><span class="comment"># 完整格式</span></span><br><span class="line">print(a[<span class="number">0</span>:<span class="number">6</span>:<span class="number">1</span>])</span><br><span class="line">print(b[<span class="number">0</span>:<span class="number">6</span>:<span class="number">1</span>])</span><br><span class="line"><span class="comment"># 简写格式</span></span><br><span class="line">print(a[<span class="number">1</span>:<span class="number">4</span>])</span><br><span class="line">print(b[<span class="number">1</span>:<span class="number">4</span>])</span><br><span class="line"><span class="comment"># 设置步进,不写默认最前到最后</span></span><br><span class="line">print(a[::<span class="number">2</span>])</span><br><span class="line">print(b[::<span class="number">2</span>])</span><br><span class="line"><span class="comment"># 逆步进(倒序)</span></span><br><span class="line">print(a[::<span class="number">-1</span>])</span><br><span class="line">print(b[::<span class="number">-1</span>])</span><br><span class="line"><span class="comment"># 前五个2步进</span></span><br><span class="line">print(a[<span class="number">0</span>:<span class="number">5</span>:<span class="number">2</span>])</span><br><span class="line">print(b[<span class="number">0</span>:<span class="number">5</span>:<span class="number">2</span>])</span><br><span class="line"><span class="comment"># 前3个后3个</span></span><br><span class="line">print(a[:<span class="number">-3</span>])</span><br><span class="line">print(a[<span class="number">-3</span>:])</span><br></pre></td></tr></table></figure></p>
<p>字典
字典是另一种可变容器模型，且可存储任意类型对象。
格式如下所示：d = {key1 : value1, key2 : value2 }
键必须是唯一的，但值则不必。
值可以取任何数据类型，但键必须是不可变数据类型，如字符串，数字或元组。
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">dict = &#123;<span class="string">'Name'</span>: <span class="string">'Runoob'</span>, <span class="string">'Age'</span>: <span class="number">7</span>, <span class="string">'Class'</span>: <span class="string">'First'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取元素</span></span><br><span class="line">name1 = dict[<span class="string">'Name'</span>]</span><br><span class="line"><span class="comment"># get第二个参数默认是None</span></span><br><span class="line">name2 = dict.get(<span class="string">'Name'</span>)</span><br><span class="line">print(name1)</span><br><span class="line">print(name2)</span><br><span class="line"><span class="comment"># 添加元素</span></span><br><span class="line">dict[<span class="string">'Address'</span>] = <span class="string">'beijing'</span></span><br><span class="line">print(dict)</span><br><span class="line"><span class="comment"># 修改元素，直接用键值覆盖</span></span><br><span class="line">dict[<span class="string">'Name'</span>] = <span class="string">'xiaotian'</span></span><br><span class="line">print(dict)</span><br><span class="line"><span class="comment"># 删除字典元素</span></span><br><span class="line"><span class="keyword">del</span> dict[<span class="string">'Address'</span>]</span><br><span class="line">print(dict)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 字典的遍历</span></span><br><span class="line">dict_ = &#123;<span class="string">'Name'</span>: <span class="string">'Runoob'</span>, <span class="string">'Age'</span>: <span class="number">7</span>, <span class="string">'Class'</span>: <span class="string">'First'</span>&#125;</span><br><span class="line"><span class="comment"># 遍历keys(键)</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> dict_.keys():</span><br><span class="line">    print(i)</span><br><span class="line">print(<span class="string">'---------------------------'</span>)</span><br><span class="line"><span class="comment"># 遍历values(值)</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> dict_.values():</span><br><span class="line">    print(i)</span><br><span class="line">print(<span class="string">'---------------------------'</span>)</span><br><span class="line"><span class="comment"># 遍历items(键、值)</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> dict_.items():</span><br><span class="line">    print(i)</span><br><span class="line"><span class="keyword">for</span> key,value <span class="keyword">in</span> dict_.items():</span><br><span class="line">    <span class="keyword">print</span> (key,end=<span class="string">'-'</span>)</span><br><span class="line">    <span class="keyword">print</span> (value)</span><br></pre></td></tr></table></figure></p>
<h2>函数</h2>
<p>在Python之中定义函数要遵循以下几点：</p>
<blockquote>
<ul>
<li>python中定义函数使用 <strong>def</strong> 关键字，后面接着函数名称和括号(),最后跟着冒号</li>
<li>函数的参数应当写在括号之中，也可以在括号中定义参数</li>
<li>函数中的 docstring 是可选的，可写可不写，建议写上</li>
<li>函数中的代码块要进行缩进</li>
<li>return 可以用于返回函数返回值或者表达式，return后面什么都不写与 return None 或者不写return 等价</li>
</ul>
</blockquote>
<h3>1.参数</h3>
<p>调用参数的时候可以使用以下几种参数：</p>
<blockquote>
<ul>
<li>必要(required)参数</li>
<li>关键(keyword)字参数</li>
<li>默认(default)参数</li>
<li>变长(variable-length)参数</li>
</ul>
</blockquote>
<p>必要参数是指必须按照函数定义的参数列表的定义，按照顺序传入，如change_list函数就必须传入mylist参数,如果没有按照要求进行传递参数，将会报错：
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change_list</span><span class="params">(mylist)</span>:</span></span><br><span class="line">    mylist.append(<span class="string">'test'</span>)</span><br></pre></td></tr></table></figure></p>
<p>当使用关键字参数对函数进行调用的时候，要按照函数定义的参数名进行赋值，这样允许不按照函数定义的参数顺序进行赋值，因为Python解释器这是可以将参数与传入变量进行对应。
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    print(a)</span><br><span class="line">    print(b)</span><br><span class="line">test(b=<span class="number">2</span>, a=<span class="number">1</span>)</span><br></pre></td></tr></table></figure></p>
<p>默认参数指的是当参数的值没有在调用时指定的话，函数将为参数赋值一个预先定义好的值，&lt;font color='red'&gt;默认参数的位置应当位于参数列表的最后&lt;/font&gt;：
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(a, b=<span class="number">5</span>)</span>:</span></span><br><span class="line">    print(a)</span><br><span class="line">    print(b)</span><br><span class="line">test(<span class="number">1</span>)</span><br><span class="line">test(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure></p>
<p>当函数需要处理的变量的数目不确定的时候可以使用变长参数，变长参数在函数定义的时候名字没有预先确定，在定义函数的时候在变量前面增加一个星号（*）表示这是一个变长变量：
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># *args接收单个参数</span></span><br><span class="line"><span class="comment"># **kwargs接收字典型键值对</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printinfo</span><span class="params">(*args,**kwargs)</span>:</span></span><br><span class="line">    print(args)</span><br><span class="line">    print(kwargs)</span><br><span class="line">printinfo(<span class="number">1</span>,<span class="string">'asdas'</span>,name=<span class="string">'asd'</span>,age=<span class="number">12</span>)</span><br></pre></td></tr></table></figure></p>
<h3>2.全局变量与局部变量</h3>
<p>在函数体中定义的变量具有局部作用域，他们只能在定义他们的函数之内被访问；全局变量可以在程序内被所有的函数访问。
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果在局部使用全局变量，不加global视为在局部新建一个变量，与原变量地址空间不同。</span></span><br><span class="line">a = <span class="number">50</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    a = <span class="number">100</span></span><br><span class="line">    print(a)</span><br><span class="line">test()</span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加global，标记为全局变量</span></span><br><span class="line">a = <span class="number">50</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">global</span> a</span><br><span class="line">    a = <span class="number">100</span></span><br><span class="line">    print(a)</span><br><span class="line">test()</span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">50</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    num = a</span><br><span class="line">    print(num)</span><br><span class="line">test()</span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure></p>
<h3>3.参数传递</h3>
<p>python中参数的传递都是引用的传递，传递的是地址空间，也可以说传递的是变量所占的地址空间
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change_list</span><span class="params">(mylist,str_)</span>:</span></span><br><span class="line">    mylist.append(<span class="string">'test'</span>)</span><br><span class="line">    print(<span class="string">'Inside function &#123;&#125;'</span>.format(mylist))</span><br><span class="line">    <span class="comment"># a指向传过来的str_的地址空间</span></span><br><span class="line">    str_ = str_ + <span class="string">'def'</span></span><br><span class="line">    print(str_)</span><br><span class="line">lst = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">b = <span class="string">'abc'</span> </span><br><span class="line">change_list(lst,b)</span><br><span class="line"><span class="comment"># 经过函数的处理，lst最后增加了一个元素</span></span><br><span class="line"><span class="comment"># 经过函数的处理，a,b都指向'abc'的地址空间</span></span><br><span class="line">print(lst)</span><br><span class="line">print(b)</span><br></pre></td></tr></table></figure></p>
<h3>4.匿名函数</h3>
<p>匿名函数的定义方法与前面讲的传统的使用<code>def</code>的方法是不同，使用<code>lambda</code>关键词定义匿名函数。</p>
<blockquote>
<ul>
<li>匿名函数可以接收任意数目的参数，但是返回值只能是一个值或者表达式，他们不能包含命令或者多个表达式。</li>
<li>lambda 函数具有自己的命名空间，他们除了参数列表中的变量以及全局变量之外无法访问其他的变量。</li>
<li>lambda 函数无法直接被用来打印变量，lambda 函数需要一个表达式
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sm = <span class="keyword">lambda</span> x, y: x + y</span><br><span class="line">res = sm(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<h2>文件操作</h2>
<h3>1.open函数</h3>
<p>open函数被用来打开或者创建文件，它将会返回一个file对象。
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file object = open(file_name [, access_mode][, buffering][,encoding])</span><br></pre></td></tr></table></figure></p>
<p>有几种常见的模式：</p>
<blockquote>
<ul>
<li>r 表示以只读方式打开 （默认模式）</li>
<li>rb 表示以二进制只读打开</li>
<li>r+ 以读写方式打开</li>
<li>rb+ 以二进制读写方式打开</li>
<li>w 以只写方式打开（如果已有文件，将会覆盖，如果没有将会创建）</li>
<li>wb 以二进制只写打开（如果已有文件，将会覆盖，如果没有将会创建）</li>
<li>w+ 以读和写的方式打开一个文件（如果已有文件，将会覆盖，如果没有将会创建）</li>
<li>wb+ 以二进制方式读和写的方式打开一个文件（如果已有文件，将会覆盖，如果没有将会创建）</li>
<li>a 表示 append，追加模式，如果文件存在的话，指针将位于文件的末尾，如果没有文件的话将会创建一个</li>
<li>ab 以二进制格式追加模式打开一个文件</li>
<li>a+ 以追加和读的方式打开一个文件</li>
<li>ab+ 以追加和读的方式打开二进制格式文件</li>
</ul>
</blockquote>
<p>buffer是读写的缓冲区间，有可以选三种值: 0 表示不适用buffer，1 表示 buffer 文件中的一行，其余正整数表示buffer的字节数</p>
<p>encoding是指明对文件编码，仅适用于文本文件。如果不明编码方式，默认是使用locale.getpreferredencoding()函数返回的编码方式。</p>
<h3>2.file对象属性</h3>
<blockquote>
<ul>
<li>file.close
返回文件是否关闭</li>
<li>file.mode
返回打开文件的模式</li>
<li>file.name
返回文件的名字
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fo = open(<span class="string">"foo.txt"</span>, <span class="string">"wb"</span>)</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Name of the file: "</span>, fo.name)</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Closed or not : "</span>, fo.closed)</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Opening mode : "</span>, fo.mode)</span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<p>close()方法
file对象的close()方法用于将没有写入文件的信息写入文件以后关闭文件，&lt;font color='red'&gt;在打开文件以后要记得关闭文件。&lt;/font&gt;</p>
<h3>3.read()和write()</h3>
<p>file 对象可以使用 read() 对文件的内容进行读取，在使用read()对文件进行读取的时候会一次性的读取文件的全部内容。还可以使用readline()，每次读取文件的一行，readlines()则可以一次读取文件中的全部行，并且返回一个列表。</p>
<p>write() 文件可以用于将内容写入文件，在写完文件之后一定要记得使用close()方法保证对于文件的更改已经写入了硬盘。</p>
<p>在对文件进行读写操作的时候，常用的一种方式是使用<code>with</code>，这样Python在对文件读写完成后会自动调用<code>close()</code>方法:
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">fo = open(<span class="string">"foo.txt"</span>, <span class="string">"w+"</span>)</span><br><span class="line">fo.write(<span class="string">"hello world"</span>)</span><br><span class="line">fo.close()</span><br><span class="line">fo = open(<span class="string">"foo.txt"</span>, <span class="string">"r"</span>)</span><br><span class="line">t = fo.read()</span><br><span class="line">print(t)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"foo.txt"</span>, <span class="string">"w+"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        f.write(str(i) + <span class="string">'\n'</span>)</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"foo.txt"</span>, <span class="string">"r"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    print(f.readlines())</span><br></pre></td></tr></table></figure></p>
<h2>Python 进阶</h2>
<h3>1.生成器</h3>
<p>通过列表生成式，我们可以直接创建一个列表。但是，受到内存限制，列表容量肯定是有限的。而且，创建一个包含100万个元素的列表，不仅占用很大的存储空间，如果我们仅仅需要访问前面几个元素，那后面绝大多数元素占用的空间都白白浪费了。所以，如果列表元素可以按照某种算法推算出来，那我们是否可以在循环的过程中不断推算出后续的元素呢？这样就不必创建完整的list，从而节省大量的空间。</p>
<p>在Python中，这种一边循环一边计算的机制，称为生成器generator。
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这是一个列表生成式</span></span><br><span class="line">L = [ x*<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">5</span>)]</span><br><span class="line"><span class="comment"># 最简单的生成器写法</span></span><br><span class="line">G = ( x*<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">5</span>))</span><br><span class="line">print(type(L))</span><br><span class="line">print(type(G))</span><br><span class="line">print(next(G))</span><br><span class="line">print(next(G))</span><br><span class="line">print(next(G))</span><br><span class="line"><span class="comment"># send输入高级用法</span></span><br><span class="line">print(G.send(<span class="keyword">None</span>))</span><br></pre></td></tr></table></figure></p>
<p>&lt;font color='red'&gt;经常我们的生成的生成器不会使用next()，而是直接使用for循环遍历，而生成器的写法也就是将函数的return变成yield，我们后面的AI学习中可能遇到很大的数据量，因此生成器是我们必不可少的工具&lt;/font&gt;
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过生成器实现斐波那契数列</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">(times)</span>:</span></span><br><span class="line">    n = <span class="number">0</span></span><br><span class="line">    a,b = <span class="number">0</span>,<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n&lt;times:</span><br><span class="line">        <span class="keyword">yield</span> b</span><br><span class="line">        a,b = b,a+b</span><br><span class="line">        n+=<span class="number">1</span></span><br></pre></td></tr></table></figure></p>
<h3>2. 迭代器</h3>
<p>迭代是访问集合元素的一种方式。迭代器是一个可以记住遍历的位置的对象。迭代器对象从集合的第一个元素开始访问，直到所有的元素被访问完结束。迭代器只能往前不会后退。
1、可迭代对象
可以直接作用于 for 循环的数据类型有以下几种：</p>
<blockquote>
<ul>
<li>一类是集合数据类型，如 list 、 tuple 、 dict 、 set 、 str 等；</li>
<li>一类是 generator ，包括生成器和带 yield 的generator function。</li>
</ul>
</blockquote>
<p>这些可以直接作用于 for 循环的对象统称为可迭代对象： Iterable &lt;font color='red'&gt;迭代器都是可迭代对象&lt;/font&gt;
2、迭代器
可以被next()函数调用并不断返回下一个值的对象称为迭代器：Iterator。
&lt;font color='red'&gt;生成器都是迭代器&lt;/font&gt;
3、iter()函数
生成器都是 Iterator 对象，但 list 、 dict 、 str 虽然是 Iterable ，却不是 Iterator 。
把 list 、 dict 、 str 等 Iterable 变成 Iterator 可以使用 iter() 函数：
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># list 是可迭代对象</span></span><br><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> a:</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure></p>
<h3>3.装饰器</h3>
<p>装饰器是由python闭包系统实现的，本质上，就是一个返回函数的高阶函数，请看：
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> ctime</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timefun</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrappedfunc</span><span class="params">(*args,**kwargs)</span>:</span></span><br><span class="line">        print(<span class="string">"%s called at %s"</span>%(func.__name__, ctime()))</span><br><span class="line">        <span class="keyword">return</span> func(*args,**kwargs)</span><br><span class="line">    <span class="keyword">return</span> wrappedfunc</span><br><span class="line"></span><br><span class="line"><span class="meta">@timefun</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(a,b)</span>:</span></span><br><span class="line">    print(a+b)</span><br><span class="line"></span><br><span class="line">test(<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过装饰器验证登陆 只有输入1才可以运行</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wfunc</span><span class="params">(*args,**kwargs)</span>:</span></span><br><span class="line">        pop = input(<span class="string">'输入编号'</span>)</span><br><span class="line">        <span class="keyword">if</span> pop == <span class="string">'1'</span>:</span><br><span class="line">            print(<span class="string">'欢迎登陆'</span>)</span><br><span class="line">            <span class="keyword">return</span> func(*args,**kwargs)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">'陌生访问'</span>)</span><br><span class="line">    <span class="keyword">return</span> wfunc</span><br><span class="line"></span><br><span class="line"><span class="meta">@login</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(a,b)</span>:</span></span><br><span class="line">    print(a+b)</span><br><span class="line"></span><br><span class="line">test(<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure></p>
<h2>错误处理</h2>
<h3>1.异常处理</h3>
<p>在python中对异常进行处理时经常使用以下结构：
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">except</span> error0:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">except</span> error1:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></p>
<p><code>try</code>后面跟着需要执行的代码块，<code>except</code>后面标注异常的类型，在出现对应的异常的时候执行对应代码块，无论程序是否正确执行<code>finally</code>后面接着的代码块都会在最后执行。Python 中内置的异常类型，参考<a href="https://docs.python.org/3/library/exceptions.html" target="_blank" rel="noopener">这个连接</a>。</p>
<h3>2.Assert语句</h3>
<p><code>assert</code>使用方法：
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">assert</span> Expression[, Expression]</span><br></pre></td></tr></table></figure></p>
<p>assert 将会判断后面跟的表达式是否为真，如果为false的话将会抛出<code>AssertionError</code>异常，经常可以用于对变量类型，或者程序逻辑进行检查，比如我们写一个计算两个向量内积的程序：
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mul</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    <span class="keyword">assert</span> len(x) == len(y), <span class="string">"size of 2 vectors should be same"</span></span><br><span class="line">    t = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(x)):</span><br><span class="line">        t += x[i] * y[i]</span><br><span class="line">    <span class="keyword">return</span> t</span><br></pre></td></tr></table></figure></p>
<h2>Python 爬虫基础、技巧</h2>
<h3>1.JSON</h3>
<p>JSON (JavaScript Object Notation) 是一种轻量级的数据交换格式,是前后端交互中常用的数据格式，它与python内建的字典很相似，可以相互转换，然后供我们提取数据
python3 中可以使用 json 模块来对 JSON 数据进行编解码，它包含了两个函数：
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">json.dumps(): 对数据进行编码,也就是字典变为json.</span><br><span class="line">json.loads(): 对数据进行解码,也就是json变为字典.</span><br></pre></td></tr></table></figure></p>
<p>&lt;font color='red'&gt;json.dumps()中 可以将ensure_ascii 设为 False可以避免一些不必要的问题&lt;/font&gt;
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="comment"># 一个标准的python字典</span></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">'no'</span> : <span class="number">1</span>,</span><br><span class="line">    <span class="string">'name'</span> : <span class="string">'Runoob'</span>,</span><br><span class="line">    <span class="string">'url'</span> : <span class="string">'http://www.runoob.com'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 将字典转换成json</span></span><br><span class="line">json_str = json.dumps(data,ensure_ascii=<span class="keyword">False</span>)</span><br><span class="line"></span><br><span class="line">print(json_str)</span><br><span class="line">print(type(json_str))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 一串json数据</span></span><br><span class="line">json_str = <span class="string">'&#123;"name": "Runoob", "no": 1, "url": "http://www.runoob.com"&#125;'</span></span><br><span class="line"><span class="comment"># 将json转为字典</span></span><br><span class="line">dict_ = json.loads(json_str)</span><br><span class="line">print(dict_)</span><br><span class="line">print(dict_[<span class="string">'name'</span>])</span><br><span class="line">print(type(dict_))</span><br></pre></td></tr></table></figure></p>
<h3>2.Requests库</h3>
<p>Requests is an elegant and simple HTTP library for Python, built for human beings.
简单的请求模式:
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># get请求</span></span><br><span class="line">response = requests.get(url, params=&#123;&#125;, headers=&#123;&#125;, cookie=&#123;&#125;, proxies=&#123;&#125;, verify=<span class="keyword">False</span>)</span><br><span class="line"><span class="comment"># post请求</span></span><br><span class="line">response = requests.post(url, data=&#123;&#125;, headers=&#123;&#125;, cookie=&#123;&#125;, proxies=&#123;&#125;, verify=<span class="keyword">False</span>)</span><br></pre></td></tr></table></figure></p>
<p>response的方法:
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">response.status_code <span class="comment">#响应状态码</span></span><br><span class="line">response.content <span class="comment">#字节方式的响应体，会自动为你解码 gzip 和 deflate 压缩</span></span><br><span class="line">response.text <span class="comment">#字符串方式的响应体，会自动根据响应头部的字符编码进行解码</span></span><br><span class="line">response.json() <span class="comment">#Requests中内置的JSON解码器</span></span><br><span class="line">response.headers <span class="comment">#响应的响应行</span></span><br><span class="line">response.request.headers <span class="comment">#请求的请求行</span></span><br></pre></td></tr></table></figure></p>
<p>我们可以通过Cookie或者Session进行模拟登陆，获取登录后的数据。
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Cookie进行模拟登陆</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">headers = &#123;<span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36'</span>,<span class="string">'Cookie'</span>:<span class="string">'anonymid=jd5aevsb-2nuy7n; _r01_=1; __utmz=151146938.1520997522.1.1.utmcsr=baidu|utmccn=(organic)|utmcmd=organic; __utma=151146938.942267969.1520997521.1520997521.1520997521.1; depovince=BJ; _de=84C13AEF64FC380CAE794CB9CCA086D2; ln_uact=18610864225; ln_hurl=http://head.xiaonei.com/photos/0/0/men_main.gif; jebe_key=59aeee30-3816-4484-9881-4f6690bdce3f%7C100ad246dd59063859de7b1ea3f6ad38%7C1526957380310%7C1%7C1526957382140; jebecookies=74f2005f-ba3d-4a61-a1d0-19948a4d8970|||||; JSESSIONID=abcD_hI_-8WDRf9JK4fow; ick_login=cc4c902c-a43d-4481-8cb3-04ecdc2b9c2f; p=9a54e6619286a17266723fc6b08cc5f04; first_login_flag=1; t=97663cf647a6e85e1bd5d13636b0a2724; societyguester=97663cf647a6e85e1bd5d13636b0a2724; id=963865664; xnsid=7a1d85fa; loginfrom=syshome; wp_fold=0'</span>&#125;</span><br><span class="line">url = <span class="string">'http://www.renren.com/963865664/profile'</span></span><br><span class="line">resp = requests.get(url,  headers=headers)</span><br><span class="line">html = resp.content.decode()</span><br><span class="line">print(re.findall(<span class="string">r"李**"</span>,html))</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Session进行模拟登陆</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">url = <span class="string">"http://www.renren.com/PLogin.do"</span></span><br><span class="line">headers = &#123;<span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36'</span>&#125;</span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">'email'</span>:<span class="string">'186****4225'</span>,</span><br><span class="line">    <span class="string">'password'</span>:<span class="string">'q****6'</span></span><br><span class="line">&#125;</span><br><span class="line">session_my = requests.session()</span><br><span class="line">session_my.post(url, data=data, headers=headers)</span><br><span class="line">html = session_my.get(<span class="string">'http://www.renren.com/963865664/profile'</span>, headers=headers).content.decode()</span><br><span class="line">print(re.findall(<span class="string">r"李**"</span>,html))</span><br></pre></td></tr></table></figure></p>
<h3>3.Xpath</h3>
<p>XPath 是一门在 XML 文档中查找信息的语言。XPath 用于在 XML 文档中通过元素和属性进行导航。
lxml库：</p>
<blockquote>
<ul>
<li>导入lxml的etree库</li>
<li>利用etree.HTML，将字符串转化为Element对象</li>
<li>Element对象具有xpath的方法</li>
<li>lxml 可以自动修正 html 代码</li>
</ul>
</blockquote>
<p>看一个实例
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">ht = <span class="string">"""</span></span><br><span class="line"><span class="string">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;bookstore&gt;·</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;book category="COOKING"&gt;</span></span><br><span class="line"><span class="string">      &lt;title lang="en"&gt;Everyday Italian&lt;/title&gt;</span></span><br><span class="line"><span class="string">      &lt;author&gt;Giada De Laurentiis&lt;/author&gt;</span></span><br><span class="line"><span class="string">      &lt;year&gt;2005&lt;/year&gt;</span></span><br><span class="line"><span class="string">      &lt;price&gt;30.00&lt;/price&gt;</span></span><br><span class="line"><span class="string">    &lt;/book&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;book category="CHILDREN"&gt;</span></span><br><span class="line"><span class="string">      &lt;title lang="en"&gt;Harry Potter&lt;/title&gt;</span></span><br><span class="line"><span class="string">      &lt;author&gt;J K. Rowling&lt;/author&gt;</span></span><br><span class="line"><span class="string">      &lt;year&gt;2005&lt;/year&gt;</span></span><br><span class="line"><span class="string">      &lt;price&gt;29.99&lt;/price&gt;</span></span><br><span class="line"><span class="string">    &lt;/book&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;book category="WEB"&gt;</span></span><br><span class="line"><span class="string">      &lt;title lang="en"&gt;XQuery Kick Start&lt;/title&gt;</span></span><br><span class="line"><span class="string">      &lt;author&gt;James McGovern&lt;/author&gt;</span></span><br><span class="line"><span class="string">      &lt;author&gt;Per Bothner&lt;/author&gt;</span></span><br><span class="line"><span class="string">      &lt;author&gt;Kurt Cagle&lt;/author&gt;</span></span><br><span class="line"><span class="string">      &lt;author&gt;James Linn&lt;/author&gt;</span></span><br><span class="line"><span class="string">      &lt;author&gt;Vaidyanathan Nagarajan&lt;/author&gt;</span></span><br><span class="line"><span class="string">      &lt;year&gt;2003&lt;/year&gt;</span></span><br><span class="line"><span class="string">      &lt;price&gt;49.99&lt;/price&gt;</span></span><br><span class="line"><span class="string">    &lt;/book&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;book category="WEB"&gt;</span></span><br><span class="line"><span class="string">      &lt;title lang="en111"&gt;Learning XML&lt;/title&gt;</span></span><br><span class="line"><span class="string">      &lt;author&gt;Erik T. Ray&lt;/author&gt;</span></span><br><span class="line"><span class="string">      &lt;year&gt;2003&lt;/year&gt;</span></span><br><span class="line"><span class="string">      &lt;price&gt;39.95&lt;/price&gt;</span></span><br><span class="line"><span class="string">    &lt;/book&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;/bookstore&gt;</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line">xml = etree.HTML(ht) </span><br><span class="line"><span class="comment"># 由于etree将xml修正，根节点已经不是bookstore，因此我们采用//</span></span><br><span class="line"><span class="comment"># 注意xpath返回的内容都是列表</span></span><br><span class="line"><span class="comment"># 选取所有 title的文本</span></span><br><span class="line">titles = xml.xpath(<span class="string">'//bookstore/book/title/text()'</span>)</span><br><span class="line">print(titles)</span><br><span class="line"><span class="comment"># 选取第一个 title的文本</span></span><br><span class="line">one_title = xml.xpath(<span class="string">'//bookstore/book[1]/title/text()'</span>)</span><br><span class="line">print(one_title)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选取价格大于35的book的year信息</span></span><br><span class="line">year = xml.xpath(<span class="string">'//bookstore/book[price&gt;35]/year/text()'</span>)</span><br><span class="line">print(year)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选取book category="CHILDREN"的书的price</span></span><br><span class="line">price = xml.xpath(<span class="string">'//bookstore/book[@category="CHILDREN"]/price/text()'</span>)</span><br><span class="line">print(price)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选取book category=“WEB”的书的title的lang属性</span></span><br><span class="line">lang = xml.xpath(<span class="string">'//bookstore/book[@category="WEB"]/title/@lang'</span>)</span><br><span class="line">print(lang)</span><br><span class="line"></span><br><span class="line"><span class="comment"># xpath如果不去选择属性和txt，会返回Element对象，可以对Element对象再次xpath</span></span><br><span class="line">aaa = xml.xpath(<span class="string">'//bookstore/book[@category="WEB"]/title'</span>)</span><br><span class="line">print(aaa)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> aaa:</span><br><span class="line">    bbb = i.xpath(<span class="string">'./@lang'</span>)</span><br><span class="line">    print(bbb)</span><br></pre></td></tr></table></figure></p>
<h3>参考资料</h3>
<blockquote>
<ul>
<li><a href="http://docs.python-requests.org/zh_CN/latest/user/quickstart.html" target="_blank" rel="noopener">Requests</a></li>
<li><a href="http://www.runoob.com/xpath/xpath-tutorial.html" target="_blank" rel="noopener">Xpath菜鸟教程</a></li>
<li><a href="http://www.w3school.com.cn/xpath/index.asp" target="_blank" rel="noopener">Xpath W3school</a></li>
</ul>
</blockquote>
<h3>4.反反爬</h3>
<p>反反爬虫措施，就是反反爬，当然还有反反反爬虫。
反反爬虫措施有以下几种:</p>
<blockquote>
<ul>
<li>降低访问频率(在requests前加time.sleep())</li>
<li>模拟请求头</li>
<li>模拟登陆</li>
<li>使用代理IP</li>
<li>携带cookie</li>
<li>设置Referer header(躲过referer检测)</li>
<li>逆向js(解密别人的反爬手段，这个比较高级)</li>
</ul>
</blockquote>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/python-爬虫/" rel="tag"># python, 爬虫</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/07/31/使用Hexo和Markdown在github上建立自己的博客/" rel="prev" title="使用Hexo和Markdown在github上建立自己的博客">
                使用Hexo和Markdown在github上建立自己的博客 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Inhaltsverzeichnis
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Übersicht
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">John Doe</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">3</span>
                    <span class="site-state-item-name">Artikel</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">3</span>
                    <span class="site-state-item-name">Tags</span>
                  
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">1.</span> <span class="nav-text">python基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">1.1.</span> <span class="nav-text">1.Python有6种标准数据类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">1.2.</span> <span class="nav-text">2.Python支持4种数字类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">1.3.</span> <span class="nav-text">3.输入与输出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">1.4.</span> <span class="nav-text">4.数据结构 List</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">2.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">2.1.</span> <span class="nav-text">1.参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">2.2.</span> <span class="nav-text">2.全局变量与局部变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">2.3.</span> <span class="nav-text">3.参数传递</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">2.4.</span> <span class="nav-text">4.匿名函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">3.</span> <span class="nav-text">文件操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">3.1.</span> <span class="nav-text">1.open函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">3.2.</span> <span class="nav-text">2.file对象属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">3.3.</span> <span class="nav-text">3.read()和write()</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">4.</span> <span class="nav-text">Python 进阶</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">4.1.</span> <span class="nav-text">1.生成器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">4.2.</span> <span class="nav-text">2. 迭代器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">4.3.</span> <span class="nav-text">3.装饰器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">5.</span> <span class="nav-text">错误处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">5.1.</span> <span class="nav-text">1.异常处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">5.2.</span> <span class="nav-text">2.Assert语句</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">6.</span> <span class="nav-text">Python 爬虫基础、技巧</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">6.1.</span> <span class="nav-text">1.JSON</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">6.2.</span> <span class="nav-text">2.Requests库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">6.3.</span> <span class="nav-text">3.Xpath</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">6.4.</span> <span class="nav-text">参考资料</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#undefined"><span class="nav-number">6.5.</span> <span class="nav-text">4.反反爬</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>

  

  
</div>




  <div class="powered-by">Erstellt mit  <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Muse</a> v6.3.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.3.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.3.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->



  



  










  





  

  

  

  
  

  
  

  


  
  

  

  

  

  

  

</body>
</html>
